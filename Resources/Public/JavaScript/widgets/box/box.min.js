Formidable.Classes.Box=Formidable.Classes.RdtBaseClass.extend({domNodeHidden:function(){if(this.hasData()){var a=$(this.config.id+"_value");if(a){return a}}return null},hasData:function(){return(this.config.hasdata==true)},replaceData:function(a){this.setHtml(a);this.setValue(a);this.userChanged(false)},getValue:function(){if(this.hasData()){return this.domNodeHidden().value}else{oResult=new Object();var d=this;Formidable.objEach(this.childs(),function(a,b){var c=d.child(a);if(c.domNode())oResult[a]=c.getValue()});return oResult}},clearValue:function(){if(this.hasData()){this.domNodeHidden().value=""}else{var d=this;Formidable.objEach(this.childs(),function(a,b){var c=d.child(a);if(c.domNode())c.clearValue()})}this.userChanged(false)},getParamsForMajix:function(a,b,c,d,e){a=this.base(a,b,c,d,e);if(b=="ondragdrop"){a["sys_draggable"]=this.oForm.o(e[0].id).getName();a["sys_draggable_value"]=this.oForm.o(e[0].id).getValue();a["sys_droppable"]=this.oForm.o(e[1].id).getName();a["sys_event"]={"type":e[2].type,"ctrlKey":e[2].ctrlKey,"shiftKey":e[2].shiftKey,"altKey":e[2].altKey,"metaKey":e[2].metaKey};if(typeof a["sys_xy"]!="undefined"){a["sys_xy"]={"screenX":e[2].screenX,"screenY":e[2].screenY,"clientX":e[2].clientX,"clientY":e[2].clientY,"layerX":e[2].layerX,"layerY":e[2].layerY,"pageX":e[2].pageX,"pageY":e[2].pageY}}}return a},setHtml:function(a){this.domNode().innerHTML=a;this.userChanged(false)},setValue:function(a){if(this.hasData()){this.domNodeHidden().value=a;this.userChanged(false)}},repaint:function(d){if(typeof(this.domNode())=="undefined")return;MKWrapper.domReplace(this.domNode(),d);this.userChanged(false);if(!this.hasData()&&this.oForm.Misc.useUserChange){var e=this;Formidable.objEach(this.childs(),function(a,b){var c=e.child(a);if(c.domNode())c.userChanged('initEvents')})}},addHandler:function(){console.log("addHandler",arguments)}});