Formidable.Classes.ListBox=Formidable.Classes.RdtBaseClass.extend({replaceData:function(o){for(var e in this.clearData(),o){var t=new Option(o[e],e);this.domNode().options[this.domNode().options.length]=t,null!=o[e]?this.domNode().options[this.domNode().options.length-1].innerHTML=o[e]:this.domNode().options[this.domNode().options.length-1].innerHTML=""}},getData:function(o){var e=this.domNode().options,t={};return MKWrapper.each(MKWrapper.$A(e),function(e,n){o?t[n]=e.value:t[e.value]=e.innerHTML},this),t},setSelected:function(o){if(this.domNode()){var e=this.domNode();MKWrapper.each(this.domNode().options,function(t,n){MKWrapper.inArray(t.value,o)>-1&&(e.options[n].selected=!0)},this)}},setAllSelected:function(){if(this.domNode()){var o=this.domNode();MKWrapper.each(this.domNode().options,function(e,t){o.options[t].selected=!0},this)}},setNoneSelected:function(){if(this.domNode()){var o=this;MKWrapper.each(o.domNode().options,function(e,t){o.domNode().options[t].selected=!1},o)}this.domNode().selectedIndex=this.domNode().multiple?-1:0},clearData:function(o){this.clearValue(),this.domNode().options.length=0},clearValue:function(o){this.setNoneSelected()},rebirth:function(o){this.domNode().value=o},getCaptionForValue:function(o){var e=this.domNode().options,t=!1;return $A(e).each(function(e,n){e.value==o&&(t=e.text)}.bind(this)),t},addItem:function(o){this.domNode().options[this.domNode().options.length]=new Option(o.caption,o.value)},removeItem:function(o){MKWrapper.each(MKWrapper.$A(this.domNode().options),function(e,t){e.value==o.value&&(this.domNode().options[t]=null)}.bind(this))},removeSelectedItems:function(){oDomNode=this.domNode();for(var o=oDomNode.options.length-1;o>=0;o--)oDomNode.options[o].selected&&(oDomNode.options[o]=null)},modifyItem:function(o){$A(this.domNode().options).each(function(e,t){this.domNode().options[t].value==o.value&&(this.domNode().options[t].text=o.caption)}.bind(this))},transferSelectedTo:function(o){(oOtherList=this.oForm.o(o.list))&&(aValues=this.getValue(),$A(aValues).each(function(e){oOtherList.domNode().options[oOtherList.domNode().options.length]=new Option(this.getCaptionForValue(e),e),1==o.removeFromSource&&this.removeItem({value:e})}.bind(this)))},moveSelectedTop:function(){oDomNode=this.domNode();var o=oDomNode.selectedIndex;o>0&&(oSelected=oDomNode.options[o],oNewOption=new Hash,oNewOption.set(oSelected.value,oSelected.innerHTML),oNewData=oNewOption.merge($H(this.getData())).toObject(),this.replaceData(oNewData),oDomNode.selectedIndex=0)},moveSelectedUp:function(){oDomNode=this.domNode();var o=oDomNode.selectedIndex;o>0&&(oSelected=oDomNode.options[o],oTarget=oDomNode.options[o-1],oNewTarget=new Option(oSelected.innerHTML,oSelected.value),oNewSelected=new Option(oTarget.innerHTML,oTarget.value),oDomNode.options[o-1]=oNewTarget,oDomNode.options[o]=oNewSelected,oDomNode.selectedIndex=o-1)},moveSelectedDown:function(){oDomNode=this.domNode();var o=oDomNode.selectedIndex;o>=0&&o<oDomNode.options.length-1&&(oSelected=oDomNode.options[o],oTarget=oDomNode.options[o+1],oNewTarget=new Option(oSelected.innerHTML,oSelected.value),oNewSelected=new Option(oTarget.innerHTML,oTarget.value),oDomNode.options[o+1]=oNewTarget,oDomNode.options[o]=oNewSelected,oDomNode.selectedIndex=o+1)},moveSelectedBottom:function(){oDomNode=this.domNode();var o=oDomNode.selectedIndex;o>=0&&o<oDomNode.options.length-1&&(oSelected=oDomNode.options[o],oNewOption=new Hash,oNewOption.set(oSelected.value,oSelected.innerHTML),oNewData=$H(this.getData()),oNewData.unset(oSelected.value),oNewData=oNewData.merge(oNewOption).toObject(),this.replaceData(oNewData),oDomNode.selectedIndex=oDomNode.options.length-1)},disableItem:function(o){$A(this.domNode().options).each(function(e,t){this.domNode().options[t].value==o&&(this.domNode().options[t].disabled="disabled")}.bind(this))},enableAll:function(o){$A(this.domNode().options).each(function(o,e){this.domNode().options[e].disabled=""}.bind(this))}});
