if(!console)var console={log:function(e){},dir:function(e){}};var Formidable={initialize:function(e){MKWrapper.extend(this,e),this.Browser.getBrowserInfo()},SEP:"__",SUBMIT_FULL:"AMEOSFORMIDABLE_EVENT_SUBMIT_FULL",SUBMIT_REFRESH:"AMEOSFORMIDABLE_EVENT_SUBMIT_REFRESH",SUBMIT_TEST:"AMEOSFORMIDABLE_EVENT_SUBMIT_TEST",SUBMIT_DRAFT:"AMEOSFORMIDABLE_EVENT_SUBMIT_DRAFT",SUBMIT_CLEAR:"AMEOSFORMIDABLE_EVENT_SUBMIT_CLEAR",SUBMIT_SEARCH:"AMEOSFORMIDABLE_EVENT_SUBMIT_SEARCH",Classes:{},CodeBehind:{},Context:{Forms:{},Objects:{}},Lister:{Pager:{goTo:function(e,t){var s=Formidable.f(e);s.domNode()[s.Misc.HiddenIds.Lister.page].value=t,s.submitRefresh()}},Sort:{by:function(e,t,s){var i=Formidable.f(s),o=i.domNode();o[i.Misc.HiddenIds.Lister.sortField].value=e,o[i.Misc.HiddenIds.Lister.sortDirection].value=t,o.action=i.Misc.Urls.Lister.sortAction,i.submitRefresh()}}},f:function(e){return this.Context.Forms[e]},o:function(e){return this.Context.Objects[e]},executeInlineJs:function(e){$H(e).each(function(e){Formidable.globalEval(unescape(e))}.bind(this))},loadedScripts:[],addScript:function(e){this.isScriptLoaded(e)||this.loadedScripts.push(e)},isScriptLoaded:function(e){return this.indexOf(this.loadedScripts,e)>-1},indexOf:function(e,t){i=0;for(var s=e.length;i<s;i++)if(e[i]===t)return i;return-1},debugMessage:function(e){e=(e=(e=(e=e.replace(/<br \/>/g,"\n")).replace(/<b>/g,"")).replace(/<\/b>/g,"")).replace(/^\s+|\s+$/g,""),console.log(e)},Browser:{name:"",version:"",os:"",total:"",getBrowserInfo:function(){this.name=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.os=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var s=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,s){if(-1!=s.indexOf(e[t].subString))return e[t].identity}else if(i)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"omniweb"},{string:navigator.vendor,subString:"Apple",identity:"safari",versionSearch:"Version"},{prop:window.opera,identity:"opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"icab"},{string:navigator.vendor,subString:"KDE",identity:"konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.vendor,subString:"Camino",identity:"camino"},{string:navigator.userAgent,subString:"Netscape",identity:"netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"internet explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"windows"},{string:navigator.platform,subString:"Mac",identity:"mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"linux"}]},Position:{putCenter:function(e,t){e=MKWrapper.$(e);var s=MKWrapper.getDimensions(e),i=this.windowDimensions(),o=this.scrollOffset();t&&"h"!=t||MKWrapper.setStyle(e,{left:i.width/2+o.width-s.width/2+"px"}),t&&"v"!=t||MKWrapper.setStyle(e,{top:i.height/2+o.height-s.height/2+"px"})},putCenterVertical:function(e){this.putCenter(e,"v")},putCenterHorizontal:function(e){this.putCenter(e,"h")},putFixedToWindowVertical:function(e,t){e=MKWrapper.$(e);MKWrapper.getDimensions(e),this.windowDimensions();var s=this.scrollOffset();MKWrapper.setStyle(e,{top:s.height+parseInt(t)+"px"})},fullScreen:function(e){e=MKWrapper.$(e);var t=this.windowDimensions(),s=this.scrollOffset();MKWrapper.setStyle(e,{height:s.height+t.height+"px"})},windowDimensions:function(){var e,t;return self.innerHeight?(e=self.innerWidth,t=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(e=document.body.clientWidth,t=document.body.clientHeight),e||(e=0),t||(t=0),{width:e,height:t}},scrollOffset:function(){var e,t;return self.pageYOffset?(e=self.pageXOffset,t=self.pageYOffset):document.documentElement&&document.documentElement.scrollTop?(e=document.documentElement.scrollLeft,t=document.documentElement.scrollTop):document.body&&(e=document.body.scrollLeft,t=document.body.scrollTop),e||(e=0),t||(t=0),{width:e,height:t}}},getLocalAnchor:function(){var e=MKWrapper.$A(window.location.href.replace(window.location.href.split("#")[0],"").split("/"));return(e=e[e.length-1]).replace(/#/,"")},log:function(){console.log(arguments)},formatSize:function(e){return iSizeInByte=parseInt(e),e>900?e>9e5?parseInt(e/1048576)+" MB":parseInt(e/1024)+" KB":e+" B"},globalEval:function(e){if("internet explorer"==Formidable.Browser.name)window.execScript(e);else if("safari"==Formidable.Browser.name){var t=document.createElement("script");t.type="text/javascript",t.defer=!1,t.text=e;var s=document.getElementsByTagName("head");if(s.length)t=s.item(0).appendChild(t);else{var i=document.createElement("head");t=(i=document.documentElement.appendChild(i)).appendChild(t)}}else window.eval(e)},includeStylesheet:function(e){if(document.createStyleSheet)document.createStyleSheet(e);else{var t="@import url('"+e+"');",s=document.createElement("link");s.rel="stylesheet",s.href="data:text/css,"+escape(t),document.getElementsByTagName("head")[0].appendChild(s)}},obj2Array:function(e){var t=[];for(var s in e)t.push({key:s,value:e[s]});return t},objEach:function(e,t){for(var s in e)t(s,e[s])},objValues:function(e){var t=[];for(var s in e)t.push(e[s]);return t}};Formidable.Classes.FormBaseClass=Base.extend({domNode:function(){return document.forms[this.sFormId]},aParamsStack:MKWrapper.$A(),aContextStack:MKWrapper.$A(),aAddPostVars:[],ajaxCache:{},ViewState:[],Objects:{},aDynHeadersLoaded:[],oLoading:null,oDebugDiv:!1,currentTriggeredArguments:!1,Services:{},AjaxRequestsStack:MKWrapper.$H(),constructor:function(e){MKWrapper.extend(this,e),this.initLoader()},getParams:function(){var e=MKWrapper.$A(this.aParamsStack);return e[e.length-1]},getContext:function(){var e=MKWrapper.$A(this.aContextStack);return e[e.length-1]},getSender:function(){return this.getContext().sender},o:function(e){return"tx_ameosformidable"==e?Formidable:Formidable.f(e)?Formidable.f(e):this.Objects[e]?this.Objects[e]:this.Objects[this.sFormId+Formidable.SEP+e]?this.Objects[this.sFormId+Formidable.SEP+e]:MKWrapper.$(e)?(oObj=MKWrapper.$(e),MKWrapper.hasClass(oObj,"readonly")?new Formidable.Classes.RdtBaseClass({formid:this.sFormId,id:e}):oObj):null},rdt:function(e){return this.o(e)},attachEvent:function(e,t,s){var i=this.o(e);i&&void 0!==i&&void 0!==i.domNode&&i.attachEvent(t,s)},handleValidationErrors:function(e,t){if(t="1"!=t&&this.sFormId+"__"+t,MKWrapper.handleValidationErrors)MKWrapper.handleValidationErrors(e,this,t);else{var s="Es sind folgende Fehler aufgetreten:\n";for(var i in e)s+="- "+e[i]+"\n";alert(s)}},updateViewState:function(e){this.ViewState.push(e)},executeServerEvent:function(e,t,s,i,o){(0==o||confirm(unescape(o)))&&(MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT").value=e,0!=s&&(MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_PARAMS").value=s,MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_HASH").value=i),t?this.doSubmit(t,!0):this.domNode().submit())},_clientData:function(e){if(e)if("string"==typeof e)"clientData::"==e.slice(0,12)&&(sObjectId=e.slice(12),oObj=this.o(sObjectId),oObj&&"function"==typeof oObj.getValue&&(e=oObj.getValue()));else if("object"==typeof e)for(var t in e)e[t]=this._clientData(e[t]);return e},executeClientEvent:function(e,t,s,i,o,a){if(bThrow=0==a||confirm(unescape(a)),bThrow){if(s.tasks.object)this.executeClientTask(s.tasks,t,i,e,o);else{var r=this;Formidable.objEach(s.tasks,MKWrapper.bind(function(s,a){r.executeClientTask(a,t,i,e,o)},this))}t&&this.updateViewState(s)}},executeClientTask:function(e,t,s,i,o){if(e.formid)var a=Formidable.f(e.formid);else a=this;var r=a.o(e.object),n=a.o(i);if(r)if(r[e.method]){oData=a._clientData(e.data);var d=n.getParamsForMajix({},s,{},{},o);d=MKWrapper.extend(d,e.databag.params);oContext=e.databag.context||{},oContext.sender=n,oContext.event=o[0],oContext.event&&(oContext.event[0]=oContext.event),this.aContextStack.push(oContext),this.aParamsStack.push(d),r[e.method](oData),this.aParamsStack.pop(),this.aContextStack.pop()}else console.log("executeClientEvent: single task: No method named "+e.method+" on "+e.object);else void 0===e.params&&console.log("executeClientEvent: single task: No object named "+e.object)},onBeforeAjaxEvent:!1,executeAjaxEvent:function(sEventName,sObjectId,sEventId,sSafeLock,bCache,bPersist,sTrigerTinyMCE,aParams,aRowParams,aLocalArguments,sJsConfirm){var t=this;if(("function"!=typeof this.onBeforeAjaxEvent||this.onBeforeAjaxEvent(this))&&(bThrow=0==sJsConfirm||confirm(unescape(sJsConfirm)),bThrow)){if(sTrigerTinyMCE&&"object"==typeof tinymce){if("string"==typeof sTrigerTinyMCE&&"true"===sTrigerTinyMCE.toLowerCase())var aTinyMCE=tinyMCE.EditorManager.get();else{var aTinyMCE=new Array;MKWrapper.each(tinyMCE.explode(sTrigerTinyMCE,","),function(e,s){t.o(e)&&aTinyMCE.push(tinyMCE.EditorManager.get(t.o(e).config.id))})}MKWrapper.each(aTinyMCE,function(e,t){try{e.save()}catch(e){}})}var aValues={};if(aParams)for(var sKey in aParams){var sName=aParams[sKey],isRowInput="rowInput::"==sName.slice(0,10),sReturnName=sName,sId=sName;isRowInput&&(aInfo=sName.split("::"),sReturnName=aInfo[1],sId=aInfo[2]),sName.indexOf("::")&&!isRowInput?(aInfo=sName.split("::"),sKey=aInfo[0],sName=aInfo[1],aValues[sKey]=sName):(oElement=this.o(sId))?aValues[sReturnName]=oElement.getParamsForMajix(oElement.getValue(),sEventName,aParams,aRowParams,aLocalArguments):isRowInput||((oElement=MKWrapper.$(this.rdtIdByName(sName)))?aValues[sReturnName]=MKWrapper.$F(oElement):aValues[sKey]=sName)}if(aRowParams)for(var sName in aRowParams)aValues[sName]=aRowParams[sName];var oObject=this.o(sObjectId);if(null!=oObject.getMajixThrowerIdentity){var sThrower=oObject.getMajixThrowerIdentity(sObjectId);aValues=oObject.getParamsForMajix(aValues,sEventName,aParams,aRowParams,aLocalArguments)}else var sThrower=sObjectId;var sValue=JSONstring.make(aValues,!0),sTrueArgs=!1;if(this.currentTriggeredArguments)var sTrueArgs=JSONstring.make(this.currentTriggeredArguments,!0);var sUrl=this.Misc.Urls.Ajax.event+"&formid="+this.sFormId+"&eventid="+sEventId+"&safelock="+sSafeLock+"&value="+escape(sValue)+"&thrower="+escape(sThrower)+"&trueargs="+escape(sTrueArgs);bCache||(sUrl+="&random="+escape(Math.random())),bCache&&null!=this.ajaxCache[sUrl]?this.executeAjaxResponse(this.ajaxCache[sUrl],bPersist,bFromCache=!0):(this.displayLoader(),MKWrapper.ajaxCall(this.Misc.Urls.Ajax.event,{method:"post",asynchronous:!0,evalJS:!0,parameters:{formid:this.sFormId,eventid:sEventId,safelock:sSafeLock,value:sValue,thrower:sThrower,trueargs:sTrueArgs},onSuccess:function(response,scope){response=MKWrapper.strStrip(response),scope=void 0!==scope?scope:this;var removeLoader=!0;MKWrapper.isJSON(response)?(eval("var oJson="+response+";"),bCache&&(scope.ajaxCache[sUrl]=oJson),scope.executeAjaxResponse(oJson,bPersist,bFromCache=!1),void 0!==oJson.tasks.object&&oJson.tasks.object?"triggerSubmit"!=oJson.tasks.method&&"sendToPage"!=oJson.tasks.method||(removeLoader=!1):MKWrapper.each(Formidable.objValues(oJson.tasks),function(e,t){"triggerSubmit"!=e.method&&"sendToPage"!=e.method||(removeLoader=!1)})):"null"!=response&&Formidable.debugMessage(response),removeLoader?scope.removeLoader():window.setTimeout(function(){scope.removeLoader()},1e4)},onFailure:function(){console.log("Ajax request failed")}},this))}},executeViewState:function(e){$A(e).each(function(e){this.executeAjaxResponse(e,!0,!1)}.bind(this))},executeAjaxResponse:function(e,t,s){this.executeAjaxAttachHeaders(e.attachheaders);try{this.executeAjaxInit(e.init)}catch(e){console.log("AJAX INIT - Exception:",e)}e.tasks.object?this.executeAjaxTask(e.tasks):Formidable.objEach(e.tasks,MKWrapper.bind(function(e,t){this.executeAjaxTask(t)},this));try{this.executeAjaxAttachEvents(e.attachevents)}catch(e){console.log("AJAX ATTACH EVENTS - Exception:",e)}try{this.executeAjaxInit(e.postinit)}catch(e){console.log("AJAX POST-INIT - Exception:",e)}t&&this.updateViewState(e)},executeAjaxInit:function(e){for(var t in e)Formidable.globalEval(e[t])},executeAjaxAttachEvents:function(e){for(var t in e)Formidable.globalEval(e[t])},executeAjaxAttachHeaders:function(e){for(var t in e){var s=e[t].replace(/%3C/g,"<").replace(/%3E/g,">");if(Formidable.indexOf(this.aDynHeadersLoaded,s)>-1)console.log("AJAX attach header avoided:"+s);else if(Formidable.isScriptLoaded(t))console.log("AJAX2 attach header avoided:"+t);else{var i=s.match(/src=["|'].+["|']/g);if(i&&i.length>0)for(var o=0;o<i.length;o++){var a=i[o].substr(5,i[o].length-6);MKWrapper.loadScript(a,function(e){(e=void 0!==e?e:this).aDynHeadersLoaded.push(s)},this)}(i=s.match(/<link rel=["|']stylesheet["|'] type=["|']text\/css["|'].+href=["|'](.+)["|'] \/>/))&&i.length>0&&(a=i[1],Formidable.includeStylesheet(a))}}},executeAjaxTask:function(e){if(e.formid)(t=Formidable.f(e.formid))||console.log("executeClientEvent: single task: on formid "+e.formid+": No method named "+e.method+" on "+e.object);else var t=this;var s=t.o(e.object);s?s[e.method]?(oContext=e.databag.context||{},aParams=e.databag.params||{},this.aContextStack.push(oContext),this.aParamsStack.push(aParams),s[e.method](e.data),this.aParamsStack.pop(),this.aContextStack.pop()):console.log("executeAjaxResponse: single task: No method named "+e.method+" on "+e.object):console.log("executeAjaxResponse: single task: No object named "+e.object)},initPersistedData:function(e){for(var t in e)if(this.o(t))try{this.o(t).rebirth(e[t])}catch(e){}},rdtIdByName:function(e){return this.sFormId+"_"+e},submitClear:function(e){this.doSubmit(Formidable.SUBMIT_CLEAR,!1,e||!1)},submitSearch:function(e){this.doSubmit(Formidable.SUBMIT_SEARCH,!1,e||!1)},submitDraft:function(e){this.doSubmit(Formidable.SUBMIT_DRAFT,!1,e||!1)},submitTest:function(e){this.doSubmit(Formidable.SUBMIT_TEST,!1,e||!1)},submitRefresh:function(e){this.doSubmit(Formidable.SUBMIT_REFRESH,!1,e||!1)},submitFull:function(e){this.doSubmit(Formidable.SUBMIT_FULL,!1,e||!1)},submitOnEnter:function(e,t,s){var i;if(window.event)i=window.event.keyCode;else{if(!s)return!0;i=s.which}return 13!=i||(this.doSubmit(Formidable.SUBMIT_FULL),!1)},cleanSysFields:function(e){MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT").value="",MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_PARAMS").value="",MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SERVEREVENT_HASH").value="",MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ADDPOSTVARS").value="",e&&(MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ENTRYID")&&(MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ENTRYID").value=""),MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_VIEWSTATE").value="",MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTED").value="",MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTER").value="")},doSubmit:function(e,t,s){if(e||(e=""),t||this.cleanSysFields(),s||this.getContext()&&(s=this.getSender())){var i={};s.isNaturalSubmitter()&&(i[s.config.namewithoutformid]=e,this.addFormData(i)),MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTER").value=s.config.idwithoutformid}MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_ADDPOSTVARS").value=JSONstring.make(this.aAddPostVars,!0),MKWrapper.$(this.sFormId+"_AMEOSFORMIDABLE_SUBMITTED").value=e,this.Misc.disableButtonsOnSubmit&&this.disableButtons(),this.Misc.displayLoaderOnSubmit&&this.displayLoader(),this.domNode().submit()},disableButtons:function(){MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),"input[type=submit]"),function(e,t){MKWrapper.$(e).disabled=!0}),MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),"input[type=button]"),function(e,t){MKWrapper.$(e).disabled=!0})},enableButtons:function(){MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),"input[type=submit]"),function(e,t){MKWrapper.$(e).disabled=!1}),MKWrapper.each(MKWrapper.findChilds(MKWrapper.$(this.sFormId),"input[type=button]"),function(e,t){MKWrapper.$(e).disabled=!1})},doNothing:function(e){return!0},scrollTo:function(e){var t=this.o(e);t&&(void 0===t.domNode?MKWrapper.scrollTo(t):MKWrapper.scrollTo(t.domNode()))},sendToPage:function(e){this.displayLoader(),this.isAbsUrl(e)||(e=this.getBaseUrl()+e),document.location.href=e},isAbsUrl:function(e){return e.substr(0,window.location.protocol.length)===window.location.protocol},getBaseUrl:function(){var e="";if(document.getElementsByTagName){var t=document.getElementsByTagName("base");t.length&&(e=t[0].href)}return""==e&&(e=window.location.protocol+"//"+window.location.host),e},openPopup:function(e){if(void 0!==e.url){var t=[],s=void 0!==e.name?e.name:"noname";void 0!==e.menubar&&t.push(1==e.menubar?"menubar=yes":"menubar=no"),void 0!==e.status&&(1==e.status?t.push("status=yes"):t.push("status=no")),void 0!==e.scrollbars&&(1==e.scrollbars?t.push("scrollbars=yes"):t.push("scrollbars=no")),void 0!==e.resizable&&(1==e.resizable?t.push("resizable=yes"):t.push("resizable=no")),void 0!==e.width&&t.push("width="+e.width),void 0!==e.height&&t.push("height="+e.height),window.open(e.url,s,t.join(", "))}else window.open(e)},toggleDebug:function(){var e=$(this.sFormId+"_debugzone");if(e&&"none"==e.style.display){for(sKey in e.style.display="block",aDivs=document.getElementsByClassName("ameosformidable_debugcontainer_void"),aDivs)aDivs[sKey].className="ameosformidable_debugcontainer";for(sKey in aDivs=document.getElementsByClassName("ameosformidable_debughandler_void"),aDivs)aDivs[sKey].className="ameosformidable_debughandler"}else{for(sKey in e.style.display="none",aDivs=document.getElementsByClassName("ameosformidable_debugcontainer"),aDivs)aDivs[sKey].className="ameosformidable_debugcontainer_void";for(sKey in aDivs=document.getElementsByClassName("ameosformidable_debughandler"),aDivs)aDivs[sKey].className="ameosformidable_debughandler_void"}},toggleBacktrace:function(e){var t=$(this.sFormId+"_formidable_call"+e+"_backtrace");t&&"none"==t.style.display?t.style.display="block":t.style.display="none"},debug:function(e){0==this.oDebugDiv&&(this.oDebugDiv=MKWrapper.$tag("div",{id:this.sFormId+"-majixdebug",style:"padding: 5px; border: 2px solid red; background-color: white; height: 500px; overflow: scroll;"}),this.domNode().appendChild(this.oDebugDiv));var t=new Date,s=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();this.oDebugDiv.innerHTML="<div style='font-weight: bold; font-size: 20px;'>DEBUG - "+s+"</div>"+e+"<hr style='margin: 20px; padding:0; border: 0; border-top:2px solid black; color: black; '/>"+this.oDebugDiv.innerHTML,this.scrollTo(this.oDebugDiv.id),this.oDebugDiv.scrollTop=0},requestNewI18n:function(e){this.cleanSysFields(!0),this.addPostVar({action:"requestNewI18n",params:e}),this.submitClear()},requestEdition:function(e){this.cleanSysFields(!0),this.addPostVar({action:"requestEdition",params:e}),this.submitClear()},execOnNextPage:function(e){this.addPostVar({action:"execOnNextPage",params:e})},addFormData:function(e){this.addPostVar({action:"formData",params:e})},addPostVar:function(e){this.aAddPostVars.push(e)},initLoader:function(){var e=MKWrapper.$tag("div",{style:"position: fixed; left: 50%; top: 50%; margin: 0; padding: 0; z-index: 999999999;",id:"tx_mkforms_spinner"}),t=MKWrapper.$tag("div",{style:"position: fixed; left: 0; top: 0; margin: 0; padding: 0; z-index: 99999999; opacity:0.6; filter: progid:DXImageTransform.Microsoft.Alpha(opacity=60)",id:"tx_mkforms_spinner_overlay"}),s=MKWrapper.$tag("div",{style:"position: fixed; z-index: 999999999;",id:"tx_mkforms_spinner_wrap"}),i=MKWrapper.$tag("img",{src:Formidable.path+"Resources/Public/Images/loading.gif"});e.appendChild(i),s.appendChild(t),s.appendChild(e),Formidable.Position.fullScreen(t),Formidable.Position.putCenter(e),this.oLoading=s},displayLoader:function(){null==this.oLoading&&this.initLoader(),"internet explorer"==Formidable.Browser.name&&(this.oLoading.style.position="absolute",Formidable.Position.putCenter(this.oLoading)),this.Misc.MajixSpinner.left&&(posLeft=this.Misc.MajixSpinner.left,parseInt(posLeft)+""==posLeft&&(posLeft+="px"),this.oLoading.style.left=posLeft);try{document.body.appendChild(this.oLoading)}catch(e){}},removeLoader:function(){try{MKWrapper.domRemove(this.oLoading),this.oLoading=null}catch(e){}},execJs:function(sJs){eval(sJs)},executeCbMethod:function(e){var t=e.cb.class;aParams={obj:Formidable.CodeBehind[t],params:e.params[0]},Formidable.CodeBehind[t][e.method](aParams,this)},filterKeypress:function(e,t){iKeyCode=e.keyCode,bOk=!0;var s=e.charCode?e.charCode:e.keyCode,i=String.fromCharCode(s);return(-1!=[8,9,16,17,18,20,27,37,39,40,46,144].indexOf(iKeyCode)||i.match(t))&&(39!=iKeyCode&&40!=iKeyCode||Prototype.Browser.Gecko)||(bOk=!1,Event.stop(e)),bOk},declareAjaxService:function(e,t,s){this.Services[e]=function(){aParams=Array.from(arguments),aParams.unshift(t,s),this.invokeAjaxService.apply(this,aParams)}.bind(this)},invokeAjaxService:function(){aParams=Array.from(arguments),sId=aParams.shift(),sSafeLock=aParams.shift(),aParams.length>0&&"function"==typeof aParams.first()?fCbk=aParams.shift():fCbk=Prototype.emptyFunction,this.AjaxRequestsStack.get(sId)&&(MKWrapper.ajaxAbort(this.AjaxRequestsStack.get(sId)),this.AjaxRequestsStack.unset(sId));var sTrueArgs=JSONstring.make(aParams,!0);this.displayLoader(),this.AjaxRequestsStack.set(sId,new Ajax.Request(this.Misc.Urls.Ajax.service,{method:"post",parameters:{formid:this.sFormId,safelock:sSafeLock,serviceid:sId,trueargs:sTrueArgs},onSuccess:function(transport){this.removeLoader(),eval("var oJson="+transport.responseText.strip()+";"),this.AjaxRequestsStack.unset(sId),fCbk(oJson)}.bind(this),onFailure:function(){this.removeLoader(),this.AjaxRequestsStack.unset(sId),console.log("Ajax request failed")}.bind(this)}))}}),Formidable.Classes.RdtBaseClass=Base.extend({oForm:null,config:{},constructor:function(e){this.config=e,this.config.userChanged=!1,this.oForm=Formidable.f(this.config.formid),this.userChanged("initEvents")},doNothing:function(){},domNode:function(){return MKWrapper.domNode(this.config.id)},userChanged:function(e){if(this.oForm.Misc.useUserChange){if("initEvents"!=e){if(void 0!==e&&(e="string"==typeof e?"true"===e.toLowerCase():Boolean(e),this.config.userChanged=e,e)){var t=this.parent();t&&t.userChanged(e)}return this.config.userChanged}void 0===this.domNode()||"INPUT"!==this.domNode().nodeName.toUpperCase()&&"TEXTAREA"!==this.domNode().nodeName.toUpperCase()&&"SELECT"!==this.domNode().nodeName.toUpperCase()||(MKWrapper.removeEvent(this.domNode(),"change.userChanged"),MKWrapper.attachEvent(this.domNode(),"change.userChanged",function(){this.userChanged(!0)},this))}},rdt:function(e){return this.oForm.o(this.config._rdts[e])},child:function(e){return this.rdt(e)},childs:function(){return this.config._rdts?this.config._rdts:{}},parent:function(){return!!this.config.parent&&this.oForm.o(this.config.parent)},replaceData:function(e){this.clearData(),this.domNode().value=e,this.userChanged(!1)},clearData:function(e){this.domNode().value="",this.userChanged(!1)},clearValue:function(){this.domNode().value="",this.userChanged(!1)},getValue:function(){if(this.isIterating()){oResults={},oIterator=this.oForm.o(this.config.iterator);var e=oIterator.getRows(),t=this;return MKWrapper.each(e,function(e){var s=t.getIdWithoutFormIdRelativeTo(oIterator),i=e.rdt(s);oResults[e.uid]=i.getValue()},t),oResults}return this.domNode()?MKWrapper.$F(this.domNode()):""},getIdWithoutFormIdRelativeTo:function(e){return sOurs=this.config.idwithoutformid,sTheirs=e.config.idwithoutformid,sOurs.startsWith(sTheirs)?sOurs.substr(sTheirs.length+2):sOurs},setValue:function(e){this.clearValue(),this.domNode().value=e,this.userChanged(!1)},appendValue:function(e){sValue=this.domNode().value,""!=sValue?this.domNode().value+=", "+e:this.domNode().value=e,this.userChanged(!1)},displayBlock:function(){(oDomNode=this.domNode())&&(MKWrapper.setStyle(oDomNode,{display:"block"}),this.displayBlockLabel(),this.displayBlockReadonly())},displayNone:function(){(oDomNode=this.domNode())&&(MKWrapper.setStyle(oDomNode,{display:"none"}),this.displayNoneLabel(),this.displayNoneReadonly())},displayDefault:function(){this.domNode().style.display="",this.displayDefaultLabel(),this.displayDefaultReadonly()},displayNoneLabel:function(){this.getLabel()&&(this.getLabel().style.display="none")},displayBlockLabel:function(){this.getLabel()&&(this.getLabel().style.display="block")},displayDefaultLabel:function(){this.getLabel()&&(this.getLabel().style.display="")},displayNoneReadonly:function(){this.getReadonly()&&(this.getReadonly().style.display="none")},displayBlockReadonly:function(){this.getReadonly()&&(this.getReadonly().style.display="block")},displayDefaultReadonly:function(){this.getReadonly()&&(this.getReadonly().style.display="")},getLabel:function(){return MKWrapper.$(this.config.id+"_label")},getReadonly:function(){return MKWrapper.$(this.config.id+"_readonly")},replaceLabel:function(e){oLabel=this.getLabel(),oLabel&&(oLabel.innerHTML=e)},visibleLabel:function(){this.getLabel()&&(this.getLabel().style.visibility="visible")},visible:function(){this.visibleLabel(),this.domNode().style.visibility="visible"},hiddenLabel:function(){this.getLabel()&&(this.getLabel().style.visibility="hidden")},hidden:function(){this.hiddenLabel(),this.domNode().style.visibility="hidden"},enable:function(){Form.enable(this.config.id)},disable:function(){Form.disable(this.config.id)},toggleDisplay:function(){"none"==this.domNode().style.display?this.displayBlock():this.displayNone()},toggleVisibility:function(){"hidden"==this.domNode().style.visibility?this.visible():this.hidden()},focus:function(){this.domNode().focus()},blur:function(){this.domNode().blur()},rebirth:function(e){},Fx:function(e){if("undefined"!=typeof Scriptaculous){if("string"==(typeof e).toLowerCase())e={effect:e,params:{}};switch(e.params.afterFinish&&"function"!=typeof e.params.afterFinish&&(e.params._afterFinish=e.params.afterFinish,e.params.afterFinish=function(){this.oForm.executeAjaxTask(e.params._afterFinish)}.bind(this)),oLabel=this.getLabel(),e.effect.toLowerCase()){case"appear":oLabel?new Effect.Parallel([new Effect.Appear(this.domNode()),new Effect.Appear(oLabel)],e.params):new Effect.Appear(this.domNode(),e.params);break;case"fade":oLabel?new Effect.Parallel([new Effect.Fade(this.domNode()),new Effect.Fade(oLabel)],e.params):new Effect.Fade(this.domNode(),e.params);break;case"puff":new Effect.Puff(this.domNode(),e.params);break;case"blinddown":new Effect.BlindDown(this.domNode(),e.params);break;case"blindup":new Effect.BlindUp(this.domNode(),e.params);break;case"switchoff":new Effect.SwitchOff(this.domNode(),e.params);break;case"slidedown":new Effect.SlideDown(this.domNode(),e.params);break;case"slideup":new Effect.SlideUp(this.domNode(),e.params);break;case"dropout":new Effect.DropOut(this.domNode(),e.params);break;case"shake":new Effect.Shake(this.domNode(),e.params);break;case"pulsate":new Effect.Pulsate(this.domNode(),e.params);break;case"squish":new Effect.Squish(this.domNode(),e.params);break;case"fold":new Effect.Fold(this.domNode(),e.params);break;case"grow":new Effect.Grow(this.domNode(),e.params);break;case"shrink":new Effect.Shrink(this.domNode(),e.params);break;case"highlight":new Effect.Highlight(this.domNode(),e.params);break;case"toggleappear":new Effect.toggle(this.domNode(),"appear",e.params);break;case"toggleslide":new Effect.toggle(this.domNode(),"slide",e.params);break;case"toggleblind":new Effect.toggle(this.domNode(),"blind",e.params);break;case"scrollto":new Effect.ScrollTo(this.config.id)}}else console.log("Scriptaculous is not loaded. Add /meta/libs = scriptaculous to your formidable")},getMajixThrowerIdentity:function(e){return e},getParamsForMajix:function(e,t,s,i,o){fkt=function(t){sKey=t.key,sValue=t.value,sKey.startsWith("majix:")&&(aParts=sKey.split(":"),oObj=this.oForm.o(aParts[1]),oObj&&"function"==typeof oObj[aParts[2]]&&(e[sKey]=oObj[aParts[2]]()))},MKWrapper.bind(fkt,this);var a=Formidable.obj2Array(e);return MKWrapper.each(a,fkt),e},getName:function(){return this.config.id.substr(this.config.formid.length+1)},repaint:function(e){void 0!==this.domNode()&&(oLabel=this.getLabel(),oLabel&&MKWrapper.domRemove(oLabel),oLabel=this.getReadonly(),oLabel&&MKWrapper.domRemove(oLabel),MKWrapper.domReplace(this.domNode(),e),this.userChanged(!1))},repaintInner:function(e){void 0!==this.domNode()&&(MKWrapper.domInsert(this.domNode(),e),this.userChanged(!1))},remove:function(){MKWrapper.domRemove(this.domNode()),this.userChanged(!1)},attachEvent:function(e,t){oObj=this.domNode(),"undefined"!=typeof oObj&&null!=oObj&&(MKWrapper.removeEvent(oObj,e+".fEvent"),MKWrapper.attachEvent(oObj,e+".fEvent",t,oObj))},addClass:function(e){MKWrapper.addClass(this.domNode(),e)},removeClass:function(e){MKWrapper.removeClass(this.domNode(),e)},removeAllClass:function(){this.domNode().classNames().each(function(e){this.removeClass(e)}.bind(this))},setStyle:function(e){MKWrapper.setStyle(this.domNode(),e)},isNaturalSubmitter:function(){return"SUBMIT"===this.domNode().nodeName.toUpperCase()||"INPUT"===this.domNode().nodeName.toUpperCase()&&("SUBMIT"===this.domNode().type.toUpperCase()||"IMAGE"===this.domNode().type.toUpperCase())},removeErrorStatus:function(){this.config.error&&(this.removeClass("hasError"),sType=this.config.error.info.type,sTypeClass="hasError"+sType.substr(0,1).toUpperCase()+sType.substr(1,sType.length),this.removeClass(sTypeClass),this.getLabel()&&(this.getLabel().removeClassName("hasError"),this.getLabel().removeClassName(sTypeClass)),$$("SPAN.rdterror").each(function(e){e.hasClassName(this.config.idwithoutformid)&&(e.style.display="none")}.bind(this)),this.config.error=!1)},setErrorStatus:function(e){this.config.error||(this.addClass("hasError"),e.type||(e.type="undetermined"),e.type&&(sTypeClass="hasError"+e.type.substr(0,1).toUpperCase()+e.type.substr(1,e.type),this.addClass(sTypeClass)),this.getLabel()&&(this.getLabel().addClassName("hasError"),e.type&&this.getLabel().addClassName(sTypeClass)),$$("SPAN.rdterror").each(function(e){e.hasClassName(this.config.idwithoutformid)&&(e.style.display="")}.bind(this)),this.config.error={info:{type:e.type}})},isIterating:function(){return 1==this.config.iterating},triggerSubmit:function(e){"refresh"==e?this.oForm.submitRefresh(this):"test"==e?this.oForm.submitTest(this):"draft"==e?this.oForm.submitDraft(this):"clear"==e?this.oForm.submitClear(this):"search"==e?this.oForm.submitSearch(this):this.oForm.submitFull(this)},trigger:function(){sWhat=arguments[0],arguments.length>1?(this.oForm.currentTriggeredArguments=Array.from(arguments).slice(1),Element.fire(this.domNode(),"formidable:"+sWhat),this.oForm.currentTriggeredArguments=!1):(this.oForm.currentTriggeredArguments=!1,Element.fire(this.domNode(),"formidable:"+sWhat))}}),Formidable.Classes.CodeBehindClass=Base.extend({config:{},constructor:function(e){this.config=e,this.oForm=Formidable.f(this.config.formid),this.init&&"function"==typeof this.init&&this.init()}});
